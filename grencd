#!/bin/bash
# grencd - Wrapper function for gren that enables directory switching
# Add this to your shell profile (.zshrc, .bashrc, etc.)

grencd() {
    local output
    output=$(gren "$@")
    local exit_code=$?

    # If gren output starts with "cd ", execute it
    if [[ $output == cd* ]]; then
        eval "$output"
        echo "üöÄ Switched to worktree: $(basename "$(pwd)")"
        echo "üìç Path: $(pwd)"
    elif [[ -n "$output" ]]; then
        echo "$output"
    fi

    return $exit_code
}

# For zsh compatibility
if [[ -n "$ZSH_VERSION" ]]; then
    alias gren='grencd'
fi

# For bash compatibility
if [[ -n "$BASH_VERSION" ]]; then
    alias gren='grencd'
fi